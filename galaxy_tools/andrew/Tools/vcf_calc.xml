<tool id="vcf_calc" name="VCF Statistics Calculator" version="0.1b">
  <description>Automates the calculation of various statistics</description>
  <command><![CDATA[
  python $__tool_directory__/vcf_calc.py
          $input
          #for $pop_file in $pop_files:
            #if $pop_file
              --pop-file $pop_file
            #end if
          #end for
          --calc-statistic $calc_statistic
          --out $output
          --overwrite
          #if $model_file
            --model-file $model_file
            --model $model
          #end if
  ]]></command>

  <inputs>
    <param format="vcf,vcf.gz,bcf" name="input" type="data" label="VCF Input" />
    <param format="txt" name="model_file" type="data" label="Model File" />
    <param name="model" type="select" size="120" label="Select Model">
        <options from_dataset="model_file" startswith="MODEL:">
            <column name="name" index="1"/>
            <column name="value" index="1"/>
        </options>
    </param>
    <param name="calc_statistic" type="select" label="Statistic">
      <option value="windowed-weir-fst" selected="True" >Windowed Fst</option>
      <option value="weir-fst">Fst</option>
      <option value="TajimaD">Tajima's D</option>
      <option value="pi">Nucleotide Diversity</option>
      <option value="freq">Allele Frequency</option>
      <option value="het-fit">Heterozygosity (Fit)</option>
      <option value="het-fis">Heterozygosity (Fis)</option>
    </param>
    <param name="statistic_window_size" type="integer" value="10000" label="Specifies the size of window calculations" />
    <param name="statistic_window_step" type="integer" value="20000" label="Specifies step size between windows" />
    <param format="txt" name="pop_files" type="data" label="Population Files" multiple="True" optional="True"/>
    <param format="tabular" name="filter_include_positions" type="data" label="Include Positions File" multiple="False" optional="True"/>
    <param format="tabular" name="filter_exclude_positions" type="data" label="Exclude Positions File" multiple="False" optional="True"/>
  </inputs>

  <outputs>
    <data format="tabular" name="output"/>
  </outputs>
  <help>
      VCF Statistics Calculator Help Text
  </help>

</tool>
